# 邀请码注册功能需求文档

## 简介

本功能旨在为现有的基于管理员邀请的用户注册系统添加邀请码注册方式。用户可以通过输入邀请码、邮箱、密码和显示名称来完成注册，系统将调用已有的 `user-signup` Edge Function 来处理注册逻辑。

## 术语表

- **邀请码注册系统**: 允许用户通过邀请码自主注册的功能模块
- **Edge Function**: Supabase 提供的服务端函数，本项目中指 `user-signup` 函数
- **登录模态框**: 当前用于用户登录的弹窗组件
- **注册模态框**: 新增的用于用户注册的弹窗组件
- **用户界面**: 前端React组件和页面

## 需求

### 需求 1

**用户故事:** 作为一个拥有邀请码的新用户，我想要通过邀请码注册账户，以便能够访问系统功能。

#### 验收标准

1. WHEN 用户访问登录页面 THEN 系统 SHALL 显示"注册"选项链接
2. WHEN 用户点击注册选项 THEN 系统 SHALL 打开注册模态框
3. WHEN 用户在注册表单中输入邮箱、密码、显示名称和邀请码 THEN 系统 SHALL 验证所有字段的格式
4. WHEN 用户提交有效的注册信息 THEN 系统 SHALL 调用 user-signup Edge Function
5. WHEN 注册成功 THEN 系统 SHALL 显示成功消息并关闭注册模态框

### 需求 2

**用户故事:** 作为用户，我想要在注册过程中获得清晰的反馈，以便了解注册状态和可能的错误。

#### 验收标准

1. WHEN 注册请求正在处理 THEN 系统 SHALL 显示加载状态并禁用提交按钮
2. WHEN 邀请码无效或其他错误发生 THEN 系统 SHALL 显示具体的错误消息
3. WHEN 注册成功 THEN 系统 SHALL 显示"注册邮件已发送！请去邮箱点击链接完成注册。"消息
4. WHEN 用户关闭注册模态框 THEN 系统 SHALL 清空表单数据
5. WHEN 表单验证失败 THEN 系统 SHALL 高亮显示错误字段并显示验证消息

### 需求 3

**用户故事:** 作为用户，我想要注册界面与现有登录界面保持一致的设计风格，以便获得统一的用户体验。

#### 验收标准

1. WHEN 注册模态框显示 THEN 系统 SHALL 使用与登录模态框相同的样式类和布局结构
2. WHEN 注册表单渲染 THEN 系统 SHALL 使用与登录表单相同的输入框样式和按钮样式
3. WHEN 用户与注册界面交互 THEN 系统 SHALL 提供与登录界面相同的视觉反馈效果
4. WHEN 注册模态框打开或关闭 THEN 系统 SHALL 使用与登录模态框相同的动画效果
5. WHEN 错误消息显示 THEN 系统 SHALL 使用与登录界面相同的错误提示样式

### 需求 4

**用户故事:** 作为开发者，我想要注册功能能够正确集成到现有的认证系统中，以便维护代码的一致性和可维护性。

#### 验收标准

1. WHEN 注册功能实现 THEN 系统 SHALL 复用现有的 useAuth hook 结构
2. WHEN 注册模态框组件创建 THEN 系统 SHALL 遵循现有组件的文件结构和命名约定
3. WHEN 注册状态管理 THEN 系统 SHALL 使用现有的 Zustand store 模式
4. WHEN 注册功能添加到路由 THEN 系统 SHALL 与现有的路由结构保持一致
5. WHEN 注册组件导出 THEN 系统 SHALL 更新 components/index.ts 文件以包含新组件

### 需求 5

**用户故事:** 作为用户，我想要能够在登录和注册之间轻松切换，以便根据我的需要选择合适的操作。

#### 验收标准

1. WHEN 用户在登录模态框中 THEN 系统 SHALL 显示"还没有账户？注册"链接
2. WHEN 用户在注册模态框中 THEN 系统 SHALL 显示"已有账户？登录"链接
3. WHEN 用户点击切换链接 THEN 系统 SHALL 关闭当前模态框并打开目标模态框
4. WHEN 模态框切换 THEN 系统 SHALL 保持表单数据的清空状态
5. WHEN 模态框切换 THEN 系统 SHALL 清除之前的错误消息