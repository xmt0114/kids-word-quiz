# 邀请码注册功能实施计划

- [x] 1. 扩展状态管理和认证逻辑


  - 在 UISlice 中添加注册模态框状态管理
  - 在 useAuth hook 中添加 signUp 方法
  - 确保与现有认证流程的兼容性
  - _需求: 4.1, 4.3_

- [x] 1.1 扩展 UISlice 添加注册模态框状态


  - 在 uiSlice.ts 中添加 registerModal 状态
  - 实现 openRegisterModal 和 closeRegisterModal 方法
  - 确保状态管理的一致性
  - _需求: 4.3_

- [ ]* 1.2 为 UISlice 扩展编写属性测试
  - **属性 3: 模态框切换一致性**
  - **验证需求: 5.3, 5.4, 5.5**

- [x] 1.3 在 useAuth 中实现 signUp 方法


  - 添加 signUp 方法调用 user-signup Edge Function
  - 实现错误处理和友好错误消息转换
  - 确保与现有 signIn 方法的一致性
  - _需求: 1.4, 2.2, 4.1_

- [ ]* 1.4 为 signUp 方法编写属性测试
  - **属性 2: API交互正确性**
  - **验证需求: 1.4, 2.2**

- [x] 2. 创建注册模态框组件


  - 创建 RegisterModal 组件
  - 实现表单验证逻辑
  - 添加与登录模态框的切换功能
  - 确保UI样式与现有组件一致
  - _需求: 1.1, 1.2, 1.3, 2.1, 2.4, 2.5, 3.1, 3.2, 5.2_

- [x] 2.1 创建 RegisterModal 基础组件结构


  - 创建 src/components/auth/RegisterModal.tsx
  - 实现基础模态框结构和样式
  - 添加表单字段（邮箱、密码、昵称、邀请码）
  - 复用现有的 Button 和输入框样式
  - _需求: 1.1, 1.2, 3.1, 3.2, 5.2_

- [x] 2.2 实现表单验证逻辑


  - 添加实时表单验证
  - 实现错误消息显示
  - 确保验证规则符合设计要求
  - _需求: 1.3, 2.5_

- [ ]* 2.3 为表单验证编写属性测试
  - **属性 1: 表单验证完整性**
  - **验证需求: 1.3, 2.5**

- [x] 2.4 实现注册提交逻辑

  - 集成 useAuth.signUp 方法
  - 添加加载状态处理
  - 实现成功和错误反馈
  - _需求: 1.4, 1.5, 2.1, 2.2, 2.3_

- [x] 2.5 添加模态框切换功能

  - 实现到登录模态框的切换链接
  - 确保切换时清空表单和错误状态
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5_

- [x] 3. 修改现有登录组件


  - 在 LoginModal 中添加注册切换链接
  - 确保双向切换功能正常工作
  - 保持现有功能不受影响
  - _需求: 5.1, 5.3_

- [x] 3.1 在 LoginModal 中添加注册链接


  - 在登录表单底部添加"还没有账户？注册"链接
  - 实现点击切换到注册模态框的逻辑
  - 确保样式与现有设计一致
  - _需求: 5.1, 5.3_

- [ ]* 3.2 为登录注册切换编写单元测试
  - 测试登录到注册的切换功能
  - 测试切换时的状态清理
  - _需求: 5.1, 5.3, 5.4, 5.5_

- [x] 4. 更新组件导出和集成


  - 更新 components/index.ts 导出新组件
  - 在 App.tsx 中集成注册模态框
  - 确保路由和导航正常工作
  - _需求: 4.2, 4.4, 4.5_

- [x] 4.1 更新组件导出文件


  - 在 src/components/index.ts 中添加 RegisterModal 导出
  - 确保导出结构的一致性
  - _需求: 4.2, 4.5_

- [x] 4.2 在 App.tsx 中集成注册模态框


  - 添加 RegisterModal 组件到应用根组件
  - 连接 UISlice 状态管理
  - 确保与现有模态框的协调工作
  - _需求: 4.4_

- [x] 5. 检查点 - 确保所有测试通过


  - 确保所有测试通过，如有问题请询问用户

- [ ]* 6. 编写集成测试
  - 编写完整注册流程的端到端测试
  - 测试错误场景和边界情况
  - 验证与现有系统的集成

- [ ]* 6.1 编写注册流程集成测试
  - 测试完整的用户注册流程
  - 模拟各种API响应场景
  - 验证UI状态变化的正确性
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5_

- [ ]* 6.2 编写错误处理集成测试
  - 测试各种错误场景的处理
  - 验证错误消息的正确显示
  - 测试网络错误和服务器错误的处理
  - _需求: 2.1, 2.2, 2.3_

- [x] 7. 最终检查点 - 确保所有测试通过


  - 确保所有测试通过，如有问题请询问用户