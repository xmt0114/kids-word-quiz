# 管理员数据审阅增强功能实施计划

- [x] 1. 增强数据获取API以支持word_order字段


  - 修改getWords API方法，增加对word_order字段的查询和排序支持
  - 更新transformWord函数，确保word_order字段正确转换
  - 添加按word_order排序的逻辑处理
  - _需求: 1.2, 2.2, 2.3_

- [ ]* 1.1 为API增强编写属性测试
  - **属性1: 序号列数据显示一致性**
  - **验证: 需求 1.2**

- [ ]* 1.2 为排序功能编写属性测试
  - **属性2: 序号排序完整性**
  - **验证: 需求 2.2, 2.3**

- [x] 2. 增强单词列表表格显示序号列


  - 在DataManagementPage的单词表格中添加"序号"列
  - 实现序号列的数据绑定和显示逻辑
  - 处理word_order为空或未定义的情况显示
  - 调整表格布局以适应新列
  - _需求: 1.1, 1.2, 1.3_

- [x] 2.1 增加按序号排序选项


  - 在现有排序控件中添加"按序号"选项
  - 实现序号排序的前端逻辑
  - 更新排序状态的UI显示
  - _需求: 2.1, 2.4, 2.5_

- [ ]* 2.2 为排序UI编写单元测试
  - 测试排序选项的显示和切换
  - 测试排序状态的UI反馈
  - _需求: 2.1, 2.5_

- [x] 3. 创建审阅教材按钮


  - 在单词列表区域添加"审阅教材"按钮
  - 实现按钮的启用/禁用逻辑（基于是否选择教材）
  - 添加按钮点击事件处理
  - _需求: 3.1, 3.2, 3.3_

- [ ]* 3.1 为审阅按钮编写单元测试
  - 测试按钮在不同状态下的显示
  - 测试按钮点击事件
  - _需求: 3.1, 3.2, 3.3_

- [x] 4. 实现横版审阅弹框基础结构


  - 创建WordReviewModal组件
  - 实现弹框的打开/关闭逻辑
  - 设计横版布局的基础样式
  - 实现弹框数据加载逻辑
  - _需求: 3.3, 3.4, 4.1_

- [x] 4.1 实现弹框内容布局


  - 设计所有字段的横版显示布局
  - 实现选项字段的每行两个排列
  - 确保所有字段（word, definition, audioText, difficulty, options, answer, hint, word_order）都显示
  - _需求: 4.1, 4.2, 4.4_

- [ ]* 4.2 为弹框布局编写单元测试
  - 测试所有字段是否正确显示
  - 测试选项字段的排列方式
  - _需求: 4.1, 4.2, 4.4_

- [x] 5. 实现字段编辑功能


  - 创建WordEditor组件
  - 实现点击字段转为编辑状态的逻辑
  - 添加字段验证逻辑（特别是word_order的数字验证）
  - 实现编辑状态的视觉指示
  - _需求: 5.1, 5.2, 5.3, 5.5_

- [ ]* 5.1 为字段编辑编写属性测试
  - **属性3: 编辑状态管理一致性**
  - **验证: 需求 5.1, 5.4**

- [ ]* 5.2 为输入验证编写属性测试
  - **属性4: 输入验证规则完整性**
  - **验证: 需求 5.2, 5.3**

- [x] 6. 实现题目导航功能


  - 创建WordNavigator组件
  - 添加"上一个"和"下一个"导航按钮
  - 实现边界条件的按钮状态控制（第一个/最后一个题目）
  - 添加切换前的未保存修改提示
  - _需求: 6.1, 6.2, 6.3, 6.4_

- [x] 6.1 实现题目切换逻辑


  - 实现题目切换时的数据加载
  - 实现编辑状态的重置逻辑
  - 处理切换时的状态管理
  - _需求: 6.5_

- [ ]* 6.2 为导航功能编写属性测试
  - **属性5: 导航状态边界处理**
  - **验证: 需求 6.2, 6.3**

- [ ]* 6.3 为题目切换编写属性测试
  - **属性6: 题目切换状态重置**
  - **验证: 需求 6.5**

- [x] 7. 实现弹框内删除功能


  - 在审阅弹框中添加删除按钮
  - 实现删除确认对话框
  - 实现删除后的自动跳转逻辑（下一个题目或上一个题目）
  - 处理删除最后一个题目的边界情况
  - _需求: 7.1, 7.2, 7.3, 7.4_

- [x] 7.1 实现删除后的数据同步


  - 更新教材的题目计数
  - 同步删除操作到后端
  - 处理删除失败的错误情况
  - _需求: 7.5_

- [ ]* 7.2 为删除功能编写属性测试
  - **属性7: 删除操作数据一致性**
  - **验证: 需求 7.3, 7.5**

- [x] 8. 实现批量修改管理


  - 创建BatchSaveManager组件
  - 实现修改内容的本地暂存逻辑
  - 实现批量提交功能
  - 添加保存状态的UI指示
  - _需求: 8.1, 8.2_

- [x] 8.1 实现批量操作的错误处理


  - 处理批量提交失败的情况
  - 显示具体的错误信息
  - 保留用户的修改内容
  - 提供重试机制
  - _需求: 8.3, 8.4, 8.5_

- [ ]* 8.2 为批量操作编写属性测试
  - **属性8: 批量操作原子性**
  - **验证: 需求 8.1, 8.2**

- [x] 9. 实现弹框关闭后的列表刷新


  - 实现弹框关闭时的自动刷新逻辑
  - 保持用户的排序和分页设置
  - 处理删除题目后的分页调整
  - 确保界面状态与数据一致性
  - _需求: 9.1, 9.2, 9.3, 9.4_

- [x] 9.1 添加刷新过程的加载状态


  - 显示刷新时的加载指示
  - 防止用户在刷新过程中进行操作
  - _需求: 9.5_

- [ ]* 9.2 为状态保持编写属性测试
  - **属性9: 状态保持一致性**
  - **验证: 需求 9.2, 9.3**

- [ ]* 9.3 为数据同步编写属性测试
  - **属性10: 界面数据同步性**
  - **验证: 需求 9.4**

- [x] 10. 检查点 - 确保所有测试通过


  - 确保所有测试通过，如有问题请询问用户

- [x] 11. 集成测试和优化



  - 进行完整功能的集成测试
  - 优化性能和用户体验
  - 处理边界情况和异常场景
  - 完善错误提示和用户反馈