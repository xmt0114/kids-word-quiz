# 管理员数据审阅增强功能需求文档

## 简介

本功能旨在优化管理员的数据管理页面，提供更高效的教材题目审阅和编辑体验。主要通过增加序号显示、新增排序方式以及创建专门的横版审阅弹框来实现快速的题目浏览、编辑和删除操作。

## 术语表

- **数据管理系统**: 管理员用于管理教材和题目的后台系统
- **单词列表**: 显示特定教材下所有题目的表格视图
- **序号**: word_order字段，表示题目在教材中的顺序
- **审阅弹框**: 专门用于快速浏览和编辑教材题目的横版对话框
- **批量操作**: 对多个题目进行统一的增删改操作

## 需求

### 需求 1

**用户故事:** 作为管理员，我希望在单词列表中看到每个题目的序号，以便了解题目在教材中的排列顺序。

#### 验收标准

1. WHEN 管理员查看单词列表 THEN 数据管理系统 SHALL 在表格中显示一个名为"序号"的新列
2. WHEN 显示序号列 THEN 数据管理系统 SHALL 显示每个题目的word_order字段值
3. WHEN 题目没有设置word_order THEN 数据管理系统 SHALL 显示默认值0或空值
4. WHEN 序号列显示 THEN 数据管理系统 SHALL 保持表格的响应式布局不受影响
5. WHEN 序号列加载 THEN 数据管理系统 SHALL 确保列宽适合显示序号数值

### 需求 2

**用户故事:** 作为管理员，我希望能够按照序号对题目进行排序，以便按照教材的原始顺序查看题目。

#### 验收标准

1. WHEN 管理员点击排序选项 THEN 数据管理系统 SHALL 在现有的"按字母"和"按时间"选项基础上增加"按序号"选项
2. WHEN 选择按序号排序 THEN 数据管理系统 SHALL 根据word_order字段对题目进行升序或降序排列
3. WHEN 按序号排序时 THEN 数据管理系统 SHALL 将没有设置word_order的题目排在最后
4. WHEN 切换排序方式 THEN 数据管理系统 SHALL 保持当前的升序/降序设置
5. WHEN 按序号排序完成 THEN 数据管理系统 SHALL 在界面上明确显示当前的排序状态

### 需求 3

**用户故事:** 作为管理员，我希望有一个专门的审阅按钮，点击后能打开针对当前教材的横版审阅弹框，以便快速浏览所有题目。

#### 验收标准

1. WHEN 管理员选择了教材 THEN 数据管理系统 SHALL 在单词列表区域显示"审阅教材"按钮
2. WHEN 没有选择教材 THEN 数据管理系统 SHALL 禁用审阅按钮并显示提示信息
3. WHEN 点击审阅按钮 THEN 数据管理系统 SHALL 打开横版的审阅弹框
4. WHEN 审阅弹框打开 THEN 数据管理系统 SHALL 加载当前教材的第一个题目
5. WHEN 审阅弹框显示 THEN 数据管理系统 SHALL 确保弹框占据屏幕的大部分宽度以显示完整信息

### 需求 4

**用户故事:** 作为管理员，我希望审阅弹框采用横版布局并显示所有题目信息，以便在不滚动的情况下查看完整的题目内容。

#### 验收标准

1. WHEN 审阅弹框显示题目 THEN 数据管理系统 SHALL 将所有字段信息在横版布局中完整展示
2. WHEN 显示选项字段 THEN 数据管理系统 SHALL 将选项按每行两个的方式排列以节省空间
3. WHEN 弹框内容超出视窗 THEN 数据管理系统 SHALL 确保所有信息在不需要侧边栏滑动的情况下可见
4. WHEN 显示题目字段 THEN 数据管理系统 SHALL 包含word、definition、audioText、difficulty、options、answer、hint和word_order等所有字段
5. WHEN 布局调整 THEN 数据管理系统 SHALL 保持良好的视觉层次和可读性

### 需求 5

**用户故事:** 作为管理员，我希望能在审阅弹框中直接编辑任何字段，包括word_order，以便快速修正题目信息。

#### 验收标准

1. WHEN 管理员在审阅弹框中点击任意字段 THEN 数据管理系统 SHALL 将该字段转换为可编辑状态
2. WHEN 编辑word_order字段 THEN 数据管理系统 SHALL 验证输入值为有效的数字
3. WHEN 编辑其他字段 THEN 数据管理系统 SHALL 根据字段类型进行相应的验证
4. WHEN 字段编辑完成 THEN 数据管理系统 SHALL 暂存修改内容等待统一提交
5. WHEN 有未保存的修改 THEN 数据管理系统 SHALL 在界面上显示修改状态指示

### 需求 6

**用户故事:** 作为管理员，我希望审阅弹框提供上一个和下一个按钮，以便快速在题目之间切换而不需要关闭弹框。

#### 验收标准

1. WHEN 审阅弹框显示 THEN 数据管理系统 SHALL 提供明显的"上一个"和"下一个"导航按钮
2. WHEN 当前是第一个题目 THEN 数据管理系统 SHALL 禁用"上一个"按钮
3. WHEN 当前是最后一个题目 THEN 数据管理系统 SHALL 禁用"下一个"按钮
4. WHEN 点击导航按钮 THEN 数据管理系统 SHALL 在切换前提示保存当前题目的修改
5. WHEN 题目切换完成 THEN 数据管理系统 SHALL 显示新题目的完整信息并重置编辑状态

### 需求 7

**用户故事:** 作为管理员，我希望审阅弹框中有删除按钮，以便直接删除不满意的题目而不需要返回列表页面。

#### 验收标准

1. WHEN 审阅弹框显示题目 THEN 数据管理系统 SHALL 提供明显的删除按钮
2. WHEN 点击删除按钮 THEN 数据管理系统 SHALL 显示确认对话框防止误操作
3. WHEN 确认删除 THEN 数据管理系统 SHALL 立即删除当前题目并自动跳转到下一个题目
4. WHEN 删除最后一个题目 THEN 数据管理系统 SHALL 跳转到上一个题目或关闭弹框
5. WHEN 删除操作完成 THEN 数据管理系统 SHALL 更新教材的题目计数

### 需求 8

**用户故事:** 作为管理员，我希望系统能够智能处理批量修改的提交，以便高效地保存多个题目的修改。

#### 验收标准

1. WHEN 管理员修改多个题目 THEN 数据管理系统 SHALL 将所有修改暂存在本地
2. WHEN 点击保存或关闭弹框 THEN 数据管理系统 SHALL 批量提交所有修改到服务器
3. WHEN 批量提交失败 THEN 数据管理系统 SHALL 显示具体的错误信息并保留修改内容
4. WHEN 批量提交成功 THEN 数据管理系统 SHALL 显示成功消息并清空暂存的修改
5. WHEN 网络异常 THEN 数据管理系统 SHALL 提供重试机制并保护用户的修改内容

### 需求 9

**用户故事:** 作为管理员，我希望关闭审阅弹框时单词列表能够自动刷新，以便看到最新的数据状态。

#### 验收标准

1. WHEN 审阅弹框关闭 THEN 数据管理系统 SHALL 自动刷新当前教材的单词列表
2. WHEN 列表刷新时 THEN 数据管理系统 SHALL 保持当前的排序和分页设置
3. WHEN 有题目被删除 THEN 数据管理系统 SHALL 更新分页信息以避免显示空页
4. WHEN 刷新完成 THEN 数据管理系统 SHALL 确保界面状态与实际数据一致
5. WHEN 刷新过程中 THEN 数据管理系统 SHALL 显示加载状态避免用户困惑