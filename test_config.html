<!DOCTYPE html>
<html>
<head>
  <title>é…ç½®æµ‹è¯•</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 900px; margin: 0 auto; background: #f0f2f5; }
    h1 { color: #1a365d; border-bottom: 3px solid #3182ce; padding-bottom: 10px; }
    h2 { color: #2c5282; margin-top: 30px; }
    .log { background: #f7fafc; padding: 15px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #3182ce; }
    .success { color: #22543d; }
    .error { color: #742a2a; }
    .warning { color: #744210; }
    .info { color: #2c5282; }
    code { background: #2d3748; color: #e2e8f0; padding: 2px 6px; border-radius: 3px; font-family: 'Courier New', monospace; }
    .code-block { background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 8px; overflow-x: auto; margin: 10px 0; }
    .highlight { background: #fef5e7; padding: 15px; border-left: 4px solid #f59e0b; margin: 15px 0; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>ğŸ¯ é…ç½®ç³»ç»Ÿæµ‹è¯•æŒ‡å—</h1>

  <div class="highlight">
    <strong>âœ¨ æ›´æ–°è¯´æ˜ï¼š</strong> é…ç½®ç³»ç»Ÿå·²ä»å…¨å±€å˜é‡è¿ç§»åˆ° React Contextï¼Œæä¾›æ›´å¥½çš„çŠ¶æ€ç®¡ç†å’Œç»„ä»¶éš”ç¦»ã€‚
  </div>

  <h2>æ­¥éª¤ 1: å¯åŠ¨åº”ç”¨</h2>
  <div class="log">
    <strong>å‘½ä»¤:</strong> <code>npm run dev</code><br>
    <strong>ç„¶å:</strong> æ‰“å¼€ <a href="http://localhost:5173" target="_blank">http://localhost:5173</a>
  </div>

  <h2>æ­¥éª¤ 2: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°</h2>
  <div class="log success">
    <strong>âœ… åº”è¯¥çœ‹åˆ°æˆåŠŸæ—¥å¿—:</strong><br>
    <div class="code-block">
ğŸ”„ [useAppConfig] æ­£åœ¨ä»æ•°æ®åº“åŠ è½½é…ç½®...<br>
âœ… [useAppConfig] æˆåŠŸä»æ•°æ®åº“åŠ è½½é…ç½®: 11 é¡¹<br>
ğŸš€ [ConfigProvider] ç»„ä»¶å¼€å§‹æ¸²æŸ“<br>
ğŸ”„ [ConfigProvider] useAppConfigçŠ¶æ€å˜åŒ–: {loading: false, error: null, dataSource: "cloud"}<br>
âœ… [ConfigProvider] ä»æ•°æ®åº“åŠ è½½é…ç½®æˆåŠŸ<br>
ğŸ“Š [ConfigProvider] é…ç½®é¡¹: ["app_settings", "default_stats", "game_constants", ...]<br>
ğŸ”§ [ConfigProvider] å½“å‰é…ç½®: {...}
    </div>
  </div>

  <h2>æ­¥éª¤ 3: éªŒè¯ Context å®ç°</h2>
  <div class="log info">
    <strong>ğŸ“Œ é…ç½®ç°åœ¨é€šè¿‡ React Context æä¾›ï¼Œå…¨å±€å˜é‡å·²è¢«ç§»é™¤</strong><br>
    <br>
    åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š<br>
    <div class="code-block">
import { useAppContext } from './hooks/useAppContext';

function MyComponent() {
  const { config, loading, dataSource } = useAppContext();

  // è·å–ç‰¹å®šé…ç½®
  const gameConfig = config?.game_constants;
  const appSettings = config?.app_settings;

  return &lt;div&gt;{/* ... */}&lt;/div&gt;;
}
    </div>
  </div>

  <h2>æ­¥éª¤ 4: è®¿é—®çŒœå•è¯è®¾ç½®é¡µé¢</h2>
  <div class="log">
    ç‚¹å‡»èœå•ä¸­çš„"çŒœå•è¯" â†’ "è®¾ç½®"<br>
    æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½ï¼Œåº”è¯¥ä¼šä½¿ç”¨æ•°æ®åº“ä¸­çš„é»˜è®¤é…ç½®<br>
    <br>
    <strong>æ£€æŸ¥ç‚¹ï¼š</strong><br>
    âœ“ è®¾ç½®é¡µé¢çš„é»˜è®¤å€¼æ¥è‡ªæœåŠ¡å™¨é…ç½®<br>
    âœ“ ä¿®æ”¹è®¾ç½®åä¿å­˜åˆ° localStorage<br>
    âœ“ ä¸‹æ¬¡è®¿é—®æ—¶ä¼˜å…ˆä½¿ç”¨ localStorageï¼Œå›é€€åˆ°æœåŠ¡å™¨é…ç½®
  </div>

  <h2>æ­¥éª¤ 5: æµ‹è¯•çƒ­æ›´æ–°</h2>
  <div class="log warning">
    <strong>ğŸ”¥ çƒ­æ›´æ–°æµ‹è¯•ï¼ˆæ— éœ€é‡æ–°éƒ¨ç½²ï¼‰:</strong><br>
    <div class="code-block">
-- åœ¨ Supabase åå°æˆ– psql ä¸­æ‰§è¡Œ
UPDATE app_config
SET value = '{"totalQuestions": 5, "optionCount": 3, "shuffleWords": true}'
WHERE key = 'game_constants';
    </div>
    <strong>ç„¶å:</strong><br>
    1. åœ¨åº”ç”¨ä¸­åˆ·æ–°é¡µé¢ï¼ˆæˆ–ç‚¹å‡»"åˆ·æ–°é…ç½®"æŒ‰é’®ï¼‰<br>
    2. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦é‡æ–°åŠ è½½é…ç½®<br>
    3. éªŒè¯æ–°é…ç½®æ˜¯å¦ç”Ÿæ•ˆ
  </div>

  <h2>æ­¥éª¤ 6: éªŒè¯é…ç½®ä½¿ç”¨</h2>
  <div class="log">
    <strong>åœ¨æ§åˆ¶å°ä¸­æµ‹è¯• Context:</strong><br>
    <div class="code-block">
// åœ¨ React ç»„ä»¶æˆ– DevTools Console ä¸­
import { useAppContext } from './hooks/useAppContext';

// ä½¿ç”¨ Hook
const { config, loading, dataSource } = useAppContext();
console.log('é…ç½®æ¥æº:', dataSource); // 'cloud' æˆ– 'builtin'
console.log('é…ç½®é¡¹æ•°é‡:', Object.keys(config || {}).length); // åº”è¯¥æ˜¯ 11
    </div>

    <strong>æµ‹è¯•ä¼˜å…ˆçº§é¡ºåº:</strong><br>
    1ï¸âƒ£ <span class="success">æœåŠ¡å™¨é…ç½®</span> - æ•°æ®åº“ä¸­çš„å€¼<br>
    2ï¸âƒ£ <span class="warning">å†…ç½®é»˜è®¤å€¼</span> - BUILTIN_DEFAULTS ä¸­çš„å€¼<br>
    3ï¸âƒ£ <span class="error">ç¡¬ç¼–ç å€¼</span> - ç›´æ¥å†™åœ¨ç»„ä»¶ä¸­çš„å€¼ï¼ˆä»…ä½œä¸ºæœ€åä¿åº•ï¼‰
  </div>

  <h2>æ­¥éª¤ 7: é”™è¯¯å¤„ç†æµ‹è¯•</h2>
  <div class="log">
    <strong>æ¨¡æ‹Ÿæ•°æ®åº“ä¸å¯ç”¨:</strong><br>
    1. æ–­å¼€ç½‘ç»œè¿æ¥<br>
    2. åˆ·æ–°é¡µé¢<br>
    3. æŸ¥çœ‹æ§åˆ¶å°åº”è¯¥æ˜¾ç¤ºä½¿ç”¨å†…ç½®é»˜è®¤é…ç½®<br>
    <div class="code-block">
âš ï¸ [ConfigProvider] ä½¿ç”¨å†…ç½®é»˜è®¤é…ç½®
    </div>
    <strong>æ¢å¤ç½‘ç»œè¿æ¥å¹¶åˆ·æ–°ï¼Œé…ç½®åº”è¯¥é‡æ–°ä»æ•°æ®åº“åŠ è½½ã€‚</strong>
  </div>

  <h2>âœ… å®Œæˆæ£€æŸ¥æ¸…å•</h2>
  <div class="log success">
    <input type="checkbox"> æ§åˆ¶å°æ˜¾ç¤ºæˆåŠŸåŠ è½½ 11 é¡¹é…ç½®<br>
    <input type="checkbox"> æ•°æ®æºæ˜¾ç¤ºä¸º "cloud"ï¼ˆä»æ•°æ®åº“ï¼‰æˆ– "builtin"ï¼ˆå†…ç½®ï¼‰<br>
    <input type="checkbox"> è®¾ç½®é¡µé¢ä½¿ç”¨æ•°æ®åº“é»˜è®¤å€¼<br>
    <input type="checkbox"> é…ç½®é€šè¿‡ Context æä¾›ï¼Œéå…¨å±€å˜é‡<br>
    <input type="checkbox"> çƒ­æ›´æ–°æ­£å¸¸å·¥ä½œï¼ˆä¿®æ”¹æ•°æ®åº“é…ç½®ååˆ·æ–°ç”Ÿæ•ˆï¼‰<br>
    <input type="checkbox"> é”™è¯¯å¤„ç†æ­£å¸¸ï¼ˆç½‘ç»œæ–­å¼€æ—¶ä½¿ç”¨å†…ç½®é…ç½®ï¼‰
  </div>

  <h2>ğŸ“š ç›¸å…³æ–‡ä»¶</h2>
  <div class="log">
    <strong>æ ¸å¿ƒæ–‡ä»¶:</strong><br>
    â€¢ <code>src/hooks/useAppConfig.ts</code> - é…ç½®åŠ è½½é€»è¾‘<br>
    â€¢ <code>src/hooks/useAppContext.tsx</code> - React Context å®ç°<br>
    â€¢ <code>src/components/ConfigProvider.tsx</code> - é…ç½®æä¾›è€…ç»„ä»¶<br>
    â€¢ <code>src/hooks/useLocalStorage.ts</code> - æœ¬åœ°å­˜å‚¨ Hookï¼ˆå«é…ç½®ä¼˜å…ˆçº§ï¼‰<br>
    â€¢ <code>schema.sql</code> - æ•°æ®åº“è¡¨ç»“æ„
  </div>

</body>
</html>
