# å„¿ç«¥çŒœå•è¯ç½‘ç«™ - æ‰©å±•å¼€å‘æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### æŠ€æœ¯æ ˆ
- **å‰ç«¯æ¡†æ¶**: React 18 + TypeScript
- **æ ·å¼ç³»ç»Ÿ**: Tailwind CSS
- **æ„å»ºå·¥å…·**: Vite
- **è¯­éŸ³åˆæˆ**: Web Speech API (SpeechSynthesis)
- **æ•°æ®å­˜å‚¨**: æœ¬åœ°JSONæ–‡ä»¶ + LocalStorage
- **éƒ¨ç½²**: é™æ€ç½‘ç«™æ‰˜ç®¡

### é¡¹ç›®ç»“æ„
```
src/
â”œâ”€â”€ components/           # Reactç»„ä»¶
â”‚   â”œâ”€â”€ HomePage.tsx     # é¦–é¡µç»„ä»¶
â”‚   â”œâ”€â”€ QuizPage.tsx     # ç­”é¢˜é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ ResultPage.tsx   # ç»“æœé¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ AudioButton.tsx  # éŸ³é¢‘æ’­æ”¾æŒ‰é’®
â”‚   â”œâ”€â”€ OptionButton.tsx # é€‰é¡¹æŒ‰é’®
â”‚   â””â”€â”€ ProgressBar.tsx  # è¿›åº¦æ¡ç»„ä»¶
â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ useSpeechSynthesis.ts  # è¯­éŸ³åˆæˆHook
â”‚   â”œâ”€â”€ useQuiz.ts       # ç­”é¢˜é€»è¾‘Hook
â”‚   â””â”€â”€ useLocalStorage.ts     # æœ¬åœ°å­˜å‚¨Hook
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ dataUtils.ts     # æ•°æ®å¤„ç†å·¥å…·
â”‚   â””â”€â”€ api.ts          # APIæ¥å£å°è£…
â”œâ”€â”€ data/               # æ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ words.json      # å•è¯æ•°æ®
â”œâ”€â”€ types/              # TypeScriptç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts        # å…¨å±€ç±»å‹å®šä¹‰
â””â”€â”€ styles/             # æ ·å¼æ–‡ä»¶
    â””â”€â”€ globals.css     # å…¨å±€æ ·å¼
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ•°æ®æµæ¶æ„
```
ç”¨æˆ·æ“ä½œ â†’ Reactç»„ä»¶ â†’ Custom Hook â†’ APIå±‚ â†’ æ•°æ®å­˜å‚¨
    â†“
çŠ¶æ€æ›´æ–° â†’ UIé‡æ¸²æŸ“ â†’ ç”¨æˆ·åé¦ˆ
```

### æ ¸å¿ƒç»„ä»¶è¯´æ˜

#### 1. HomePage (é¦–é¡µç»„ä»¶)
**åŠŸèƒ½**: é¢˜å‹é€‰æ‹©å’Œé…ç½®
```typescript
interface HomePageProps {
  onStart: (config: QuizConfig) => void;
}

interface QuizConfig {
  questionType: 'text' | 'audio';
  answerType: 'choice' | 'fill';
  difficulty: 'easy' | 'medium' | 'hard';
}
```

**å…³é”®ç‰¹æ€§**:
- å“åº”å¼å¡ç‰‡å¸ƒå±€
- çŠ¶æ€ç®¡ç†ï¼ˆé€‰æ‹©çš„é¢˜å‹ã€ç­”é¢˜æ–¹å¼ã€éš¾åº¦ï¼‰
- åŠ¨ç”»åé¦ˆæ•ˆæœ

#### 2. QuizPage (ç­”é¢˜é¡µé¢ç»„ä»¶)
**åŠŸèƒ½**: ç­”é¢˜äº¤äº’å’Œè¿›åº¦ç®¡ç†
```typescript
interface QuizPageProps {
  config: QuizConfig;
  onComplete: (results: QuizResults) => void;
}

interface QuizResults {
  score: number;
  total: number;
  answers: Answer[];
}
```

**å…³é”®ç‰¹æ€§**:
- åŠ¨æ€é¢˜ç›®åŠ è½½
- SpeechSynthesisé›†æˆ
- ç­”é¢˜çŠ¶æ€ç®¡ç†
- è¿›åº¦è¿½è¸ª

#### 3. AudioButton (éŸ³é¢‘æ’­æ”¾ç»„ä»¶)
**åŠŸèƒ½**: è¯­éŸ³åˆæˆæ’­æ”¾æ§åˆ¶
```typescript
interface AudioButtonProps {
  text: string;
  onPlay?: () => void;
  onPause?: () => void;
  className?: string;
}
```

**å…³é”®ç‰¹æ€§**:
- æ’­æ”¾/æš‚åœçŠ¶æ€ç®¡ç†
- è„‰æåŠ¨ç”»æ•ˆæœ
- é”™è¯¯å¤„ç†å’Œé™çº§

## ğŸ”§ è‡ªå®šä¹‰Hooksè¯¦è§£

### useSpeechSynthesis
**ç”¨é€”**: ç®¡ç†è¯­éŸ³åˆæˆåŠŸèƒ½
```typescript
function useSpeechSynthesis() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [isSupported, setIsSupported] = useState(false);
  
  const speak = useCallback((text: string) => {
    // è¯­éŸ³åˆæˆé€»è¾‘
  }, []);
  
  const stop = useCallback(() => {
    // åœæ­¢æ’­æ”¾é€»è¾‘
  }, []);
  
  return { speak, stop, isPlaying, isSupported };
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
const { speak, isPlaying } = useSpeechSynthesis();

<AudioButton 
  text={question.audioText}
  onPlay={() => speak(question.audioText)}
/>
```

### useQuiz
**ç”¨é€”**: ç®¡ç†ç­”é¢˜é€»è¾‘å’ŒçŠ¶æ€
```typescript
function useQuiz(config: QuizConfig) {
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [answers, setAnswers] = useState<Answer[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  
  const submitAnswer = useCallback((answer: string) => {
    // æäº¤ç­”æ¡ˆé€»è¾‘
  }, [currentQuestion, config]);
  
  return {
    currentQuestion,
    answers,
    isLoading,
    submitAnswer,
    nextQuestion: () => setCurrentQuestion(prev => prev + 1)
  };
}
```

## ğŸ“Š æ•°æ®ç»“æ„è®¾è®¡

### å•è¯æ•°æ®æ ¼å¼
```typescript
interface Word {
  id: number;
  word: string;
  definition: string;        // æ–‡å­—é¢˜å¹²
  audioText: string;         // éŸ³é¢‘é¢˜å¹²æ–‡æœ¬
  difficulty: 'easy' | 'medium' | 'hard';
  options: string[];         // é€‰æ‹©é¢˜é€‰é¡¹
  answer: string;            // æ­£ç¡®ç­”æ¡ˆ
  hint: string;              // å¡«ç©ºé¢˜æç¤º
}

interface WordData {
  words: Word[];
  questionTypes: QuestionType[];
  answerTypes: AnswerType[];
  difficultyLevels: DifficultyLevel[];
}
```

### ç­”é¢˜ç»“æœæ ¼å¼
```typescript
interface Answer {
  questionId: number;
  userAnswer: string;
  correctAnswer: string;
  isCorrect: boolean;
  timeSpent: number;         // ç­”é¢˜ç”¨æ—¶ï¼ˆç§’ï¼‰
}

interface QuizResults {
  score: number;
  total: number;
  answers: Answer[];
  startTime: number;
  endTime: number;
  config: QuizConfig;
}
```

## ğŸ¨ è®¾è®¡ç³»ç»Ÿé›†æˆ

### Tailwind CSSé…ç½®
```javascript
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      colors: {
        primary: {
          500: '#ff6b6b',
          600: '#ff8e53'
        },
        secondary: {
          500: '#4ecdc4',
          600: '#44a2fc'
        },
        accent: {
          500: '#ffe66d'
        }
      },
      fontFamily: {
        display: ['Fredoka', 'Baloo 2', 'sans-serif']
      },
      borderRadius: {
        'card': '32px',
        'button': '50px'
      },
      spacing: {
        'xs': '8px',
        'xl': '48px',
        '2xl': '64px',
        '3xl': '96px'
      }
    }
  }
}
```

### è®¾è®¡ä»¤ç‰Œä½¿ç”¨
```typescript
// ä½¿ç”¨design-tokens.jsonä¸­çš„å€¼
const designTokens = {
  colors: {
    primary: '#ff6b6b',
    secondary: '#4ecdc4',
    accent: '#ffe66d'
  },
  fontSize: {
    body: '18px',
    heading: '48px'
  },
  spacing: {
    button: '56px',
    card: '32px'
  }
};
```

## ğŸ”Œ APIæ¥å£è®¾è®¡

### æœ¬åœ°APIæ¥å£
```typescript
// code/api.ts
interface WordAPI {
  getWords(filters?: {
    difficulty?: string;
    limit?: number;
    offset?: number;
  }): Promise<WordApiResponse>;
  
  validateAnswer(wordId: number, answer: string): Promise<ApiResponse<{
    correct: boolean;
    message: string;
  }>>;
}
```

### åç«¯APIè¿ç§»
å½“éœ€è¦è¿ç§»åˆ°çœŸå®åç«¯æ—¶ï¼š

1. **æ›´æ–°APIé…ç½®**
```typescript
// API_CONFIG.DATA_SOURCE = 'backend'
export const API_CONFIG = {
  DATA_SOURCE: 'backend',
  BASE_URL: 'https://your-api.com/api'
};
```

2. **å®ç°åç«¯æ¥å£**
```typescript
// åç«¯éœ€è¦å®ç°çš„æ¥å£
GET /api/words?difficulty=easy&limit=5
POST /api/words/:id/validate
GET /api/question-types
GET /api/answer-types
GET /api/difficulty-levels
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
```typescript
// ç»„ä»¶æµ‹è¯•ç¤ºä¾‹
import { render, screen, fireEvent } from '@testing-library/react';
import { AudioButton } from './AudioButton';

describe('AudioButton', () => {
  test('should play audio when clicked', () => {
    const mockSpeak = jest.fn();
    render(<AudioButton text="test" onPlay={mockSpeak} />);
    
    fireEvent.click(screen.getByRole('button'));
    expect(mockSpeak).toHaveBeenCalledWith('test');
  });
});
```

### é›†æˆæµ‹è¯•
```typescript
// ç­”é¢˜æµç¨‹æµ‹è¯•
test('complete quiz flow', async () => {
  render(<App />);
  
  // é€‰æ‹©é…ç½®
  fireEvent.click(screen.getByText('æ–‡å­—é¢˜å¹²'));
  fireEvent.click(screen.getByText('é€‰æ‹©é¢˜'));
  fireEvent.click(screen.getByText('ç®€å•'));
  fireEvent.click(screen.getByText('å¼€å§‹ç­”é¢˜'));
  
  // ç­”é¢˜
  fireEvent.click(screen.getByText('brother'));
  
  // éªŒè¯ç»“æœ
  expect(screen.getByText('ç­”é¢˜å®Œæˆ')).toBeInTheDocument();
});
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

### éƒ¨ç½²é€‰é¡¹

#### 1. Verceléƒ¨ç½²
```bash
# å®‰è£…Vercel CLI
npm i -g vercel

# éƒ¨ç½²
vercel --prod
```

#### 2. Netlifyéƒ¨ç½²
```bash
# å®‰è£…Netlify CLI
npm i -g netlify-cli

# æ„å»ºå¹¶éƒ¨ç½²
npm run build
netlify deploy --prod --dir=dist
```

#### 3. GitHub Pageséƒ¨ç½²
```bash
# å®‰è£…gh-pages
npm install --save-dev gh-pages

# åœ¨package.jsonä¸­æ·»åŠ éƒ¨ç½²è„šæœ¬
{
  "scripts": {
    "deploy": "gh-pages -d dist"
  }
}

# éƒ¨ç½²
npm run build
npm run deploy
```

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# .env.production
VITE_API_BASE_URL=https://your-api.com
VITE_ENABLE_ANALYTICS=true
VITE_SPEECH_LANG=zh-CN
```

## ğŸ”§ æ€§èƒ½ä¼˜åŒ–

### ä»£ç åˆ†å‰²
```typescript
// è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²
const HomePage = lazy(() => import('./components/HomePage'));
const QuizPage = lazy(() => import('./components/QuizPage'));
const ResultPage = lazy(() => import('./components/ResultPage'));

function App() {
  return (
    <Suspense fallback={<LoadingSpinner />}>
      <Routes>
        <Route path="/" element={<HomePage />} />
        <Route path="/quiz" element={<QuizPage />} />
        <Route path="/result" element={<ResultPage />} />
      </Routes>
    </Suspense>
  );
}
```

### èµ„æºä¼˜åŒ–
```typescript
// é¢„åŠ è½½å…³é”®èµ„æº
const preloadAudio = (text: string) => {
  const utterance = new SpeechSynthesisUtterance(text);
  speechSynthesis.speak(utterance);
};

// å›¾ç‰‡æ‡’åŠ è½½
const LazyImage = ({ src, alt }) => {
  const [loaded, setLoaded] = useState(false);
  
  return (
    <img 
      src={src} 
      alt={alt}
      onLoad={() => setLoaded(true)}
      className={`transition-opacity ${loaded ? 'opacity-100' : 'opacity-0'}`}
    />
  );
};
```

## ğŸ”’ å®‰å…¨è€ƒè™‘

### å†…å®¹å®‰å…¨ç­–ç•¥
```html
<!-- åœ¨index.htmlä¸­æ·»åŠ CSP -->
<meta http-equiv="Content-Security-Policy" 
      content="default-src 'self'; 
               script-src 'self' 'unsafe-inline'; 
               style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
               font-src 'self' https://fonts.gstatic.com;">
```

### æ•°æ®éªŒè¯
```typescript
// è¾“å…¥éªŒè¯
const validateInput = (input: string) => {
  // ç§»é™¤å±é™©å­—ç¬¦
  const sanitized = input.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
  
  // é•¿åº¦é™åˆ¶
  if (sanitized.length > 100) {
    throw new Error('è¾“å…¥å†…å®¹è¿‡é•¿');
  }
  
  return sanitized;
};
```

## ğŸ“ˆ ç›‘æ§å’Œåˆ†æ

### é”™è¯¯ç›‘æ§
```typescript
// é”™è¯¯è¾¹ç•Œç»„ä»¶
class ErrorBoundary extends React.Component {
  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    console.error('ç»„ä»¶é”™è¯¯:', error, errorInfo);
    
    // å‘é€åˆ°ç›‘æ§æœåŠ¡
    if (process.env.NODE_ENV === 'production') {
      // sendToMonitoring(error, errorInfo);
    }
  }
  
  render() {
    if (this.state.hasError) {
      return <div>å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚</div>;
    }
    
    return this.props.children;
  }
}
```

### æ€§èƒ½ç›‘æ§
```typescript
// æ€§èƒ½æŒ‡æ ‡æ”¶é›†
const measurePerformance = () => {
  if ('performance' in window) {
    const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;
    
    console.log('é¡µé¢åŠ è½½æ—¶é—´:', navigation.loadEventEnd - navigation.fetchStart);
    console.log('DOMè§£ææ—¶é—´:', navigation.domContentLoadedEventEnd - navigation.responseEnd);
  }
};

useEffect(() => {
  measurePerformance();
}, []);
```

## ğŸ› ï¸ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°é¢˜å‹
1. **æ›´æ–°æ•°æ®ç±»å‹**
```typescript
// types/index.ts
interface NewQuestionType {
  id: 'drag-drop';
  name: 'æ‹–æ‹½é¢˜';
  description: 'æ‹–æ‹½å•è¯åˆ°æ­£ç¡®ä½ç½®';
}
```

2. **åˆ›å»ºæ–°ç»„ä»¶**
```typescript
// components/DragDropQuestion.tsx
const DragDropQuestion: React.FC<QuestionProps> = ({ question }) => {
  // æ‹–æ‹½é¢˜å®ç°é€»è¾‘
  return <div>æ‹–æ‹½é¢˜ç»„ä»¶</div>;
};
```

3. **æ›´æ–°é…ç½®ç•Œé¢**
```typescript
// åœ¨HomePageä¸­æ·»åŠ æ–°é€‰é¡¹
<QuestionTypeCard 
  type="drag-drop"
  title="æ‹–æ‹½é¢˜"
  description="æ‹–æ‹½å•è¯åˆ°æ­£ç¡®ä½ç½®"
  icon="ğŸ§©"
/>
```

### æ·»åŠ æ–°éš¾åº¦çº§åˆ«
```typescript
// data/words.jsonä¸­æ·»åŠ æ–°éš¾åº¦
{
  "difficultyLevels": [
    // ç°æœ‰éš¾åº¦...
    { "id": "expert", "name": "ä¸“å®¶", "color": "#9C27B0" }
  ]
}
```

### é›†æˆåç«¯API
1. **æ›´æ–°APIé…ç½®**
2. **ä¿®æ”¹æ•°æ®è·å–é€»è¾‘**
3. **æ·»åŠ è®¤è¯æœºåˆ¶**
4. **å®ç°æ•°æ®åŒæ­¥**

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¼€å‘ç¯å¢ƒè¦æ±‚
- Node.js 16+
- npm 8+ æˆ– yarn 1.22+
- ç°ä»£æµè§ˆå™¨æ”¯æŒ

### å¸¸ç”¨å‘½ä»¤
```bash
# å¼€å‘ç¯å¢ƒå¯åŠ¨
npm run dev

# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ ¼å¼åŒ–
npm run format

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

### è´¡çŒ®æŒ‡å—
1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»ºPull Request

---

**ç¥å¼€å‘æ„‰å¿«ï¼** ğŸš€

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹é¡¹ç›®çš„Issuesé¡µé¢æˆ–åˆ›å»ºæ–°çš„Issueã€‚